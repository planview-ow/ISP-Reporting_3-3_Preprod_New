System.register(["jimu-core"],(function(e,t){var n={};return{setters:[function(e){n.AbstractMessageAction=e.AbstractMessageAction,n.WidgetManager=e.WidgetManager,n.appActions=e.appActions,n.getAppStore=e.getAppStore}],execute:function(){e((()=>{"use strict";var e={48891:e=>{e.exports=n}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{o.r(r),o.d(r,{default:()=>t});var e=o(48891);class t extends e.AbstractMessageAction{loadWidgetClass(t){var n,o;if(t)return(null===(o=null===(n=(0,e.getAppStore)().getState().widgetsRuntimeInfo)||void 0===n?void 0:n[t])||void 0===o?void 0:o.isClassLoaded)?Promise.resolve(e.WidgetManager.getInstance().getWidgetClass(t)):e.WidgetManager.getInstance().loadWidgetClass(t)}filterMessageDescription(e){return!0}filterMessage(e){return!0}getSettingComponentUri(e,t){return"message-actions/run-workflow-message-action-setting"}onExecute(t,n){var o,r,i,s,a;return r=this,i=void 0,a=function*(){yield this.loadWidgetClass(this.widgetId);const r=e.appActions.openWidget(this.widgetId);(0,e.getAppStore)().dispatch(r);const i=[{name:"context",value:t},...null!==(o=null==n?void 0:n.parameters)&&void 0!==o?o:[]],s=new Event("start-workflow",{bubbles:!0});return s.widgetId=this.widgetId,s.workflowInfo=n.workflow,s.workflowParameters=i,window.document.dispatchEvent(s),!0},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{d(a.next(e))}catch(e){t(e)}}function o(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,o)}d((a=a.apply(r,i||[])).next())}))}}})(),r})())}}}));