"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[6658],{16658:(e,t,r)=>{r.r(t),r.d(t,{DisplayForm:()=>c});var o,n=r(68230),s=r(47130),i=r(64678),u=r.n(i),a=r(41268),l=r(86031);let c=o=class{static createRenderer(e,t,r){let o=t.luid,n=!1!==e.reset;var s=e.name;"string"==typeof s&&(o=":"+s);const i=this.renderers;let u=i[o];if(void 0===u){n=!0,u=i[o]=r.create();var a=function(){delete i[o],u.dispose()};(u.state=t.ambient).completion.then(a,a)}return n?u.load(e.form,e.template):u.load(),a="string"==typeof e.container?e.container:"default",e="string"==typeof e.region?e.region:void 0,u.form.defaults.container=void 0!==e||"default"!==a&&"modal"!==a?{name:a,region:e}:a,u}execute(e,t,r){let n=t.state;if(void 0!==n){var s=n.outputs,i=t.caught;if(void 0!==i){var a=(a=s.event)?`Error in ${a.name} element's ${a.type} event in`:"Error in a subworkflow of";return console.error(`${a} a Display Form activity: ${i.message}`,i),t.fork("catch"),n.busy(),n.outputs={actor:n,state:n.form.elements,event:s.event,route:!1,error:i},o.updateElementMap(n.outputs),n.outputs}if("string"==typeof(i=s.result))return n.spinNoBlock(),n.outputs={actor:n,state:n.form.elements,event:s.event,route:!1,result:i,status:i},o.updateElementMap(n.outputs),n.outputs;if("object"==typeof i&&null!==i)return n.spinNoBlock(),u().reject(i);s.route&&n.route(s.event)}else n=o.createRenderer(e,t,r),t.persist(n);return n.outputs=void 0,function(e,t){let r,o;var n=new(u())(((e,t)=>{r=e,o=t}));let s=e();return function n(){for(;s.isFulfilled();){var i;if(void 0===(i=s.value()))break;if(void 0!==(i=t(i))){r(i);break}s=e()}s.isPending()&&s.then(n),s.isRejected()&&o(s.reason())}(),n}((function(){const e=n.observe();return e.isFulfilled()&&void 0===e.value()&&n.dispose(),e}),(function(e){let r;var s=e.value;const i="submit"!==e.type&&"end"!==e.type||"string"!=typeof s?void 0:s;function a(){return r=n.outputs={actor:n,state:n.form.elements,event:e,route:!1,result:i,status:i},o.updateElementMap(n.outputs),n.outputs}if(!n.trap(e)&&t.hasBranch(e.routingKey)){const o=e.cancellationToken;if(null!=o){if(u().resolve(o).isFulfilled())return void n.route(e);o.then((function(){n.outputs===r&&t.goto()}))}else n.busy();return t.fork(e.routingKey),t.registerForErrors(),a()}if(void 0!==i)return n.spinNoBlock(),a();n.route(e)}))}static updateElementMap(e){if(e&&e.state)for(const t in e.state)(0,a.i)(e.state[t],e)}};c.renderers={},c.action="gcx:wf:forms:form:DisplayForm",c.suite="gcx:wf:builtin",c=o=(0,n.gn)([(0,s.QZ)(l.l)],c)},41268:(e,t,r)=>{r.d(t,{N:()=>n,i:()=>s});const o=new WeakMap;function n(e){return o.get(e)}function s(e,t){o.set(e,t)}}}]);