"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[2751],{92751:(e,t,s)=>{s.r(t),s.d(t,{GeoprocessingAsync:()=>d});var a=s(68230),n=s(68831),i=s(84650),c=s(8558),l=s(61457),o=s(18886),u=s(37143),r=s.n(u),g=s(67411),b=s(46275);const{submitJob:f}=i.default;let d=class{async execute(e,t,s){var a=o.U.string("url",e.url,o.U.never),n=s.getOutSR(e.outSpatialReference),i=s.getOutSR(e.processSpatialReference);s=o.U.exists("arguments",e.arguments,{}),e=(0,b.Rw)(t.cancellationToken)?{signal:t.cancellationToken.signal}:void 0,i={outSpatialReference:n,processSpatialReference:i};let c,u=await f(a,s,i,e);if(i=u.waitForJobCompletion(),(0,b.Iz)(t,i),u=await i,function(e){return"job-succeeded"===e}(u.jobStatus)){c={},e=(await this.getResultNames(u,e)).map((e=>u.fetchResultData(e).then((t=>c[e]=t.value))));const s=r().all(e);l.i.race([s,t.cancellationToken]).finally((function(){s.isPending()&&u.cancelJob(u.jobId)})),await s}return{id:u.jobId,status:u.jobStatus,results:c,messages:u.messages}}async getResultNames(e,t){const s=e.sourceUrl;var a=s.indexOf("?");let i=s,c="";return-1!==a&&(i=s.substring(0,a),c=s.substring(a)),c=c?`${c}&f=json`:"?f=json",e=`${i}/jobs/${e.jobId}${c}`,t=(await(0,n.default)(e,t))?.data?.results,t?Object.keys(t):void 0}};d.action="gcx:wf:arcgis::GeoprocessingAsync",d.suite="gcx:wf:builtin",d=(0,a.gn)([(0,c.QZ)(g.I)],d)}}]);