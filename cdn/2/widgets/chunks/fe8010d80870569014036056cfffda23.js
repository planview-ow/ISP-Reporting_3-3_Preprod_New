"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[5655],{35655:(e,t,n)=>{n.r(t),n.d(t,{WebRequest:()=>b});var o=n(68230),r=n(3091),s=n(47130),u=n(27387),c=n(64678),l=n.n(c),a=n(34545),i=n(58657);function f(e){return null==e?"":"boolean"==typeof e?!0===e?"true":"false":"number"==typeof e?encodeURIComponent(e.toString()):"string"==typeof e?encodeURIComponent(e):"object"==typeof e?encodeURIComponent(JSON.stringify(e)):""}function p(e){const t=[];for(const o in e){var n=e[o];if(n instanceof Array)for(const e of n)t.push(o+"="+f(e));else t.push(o+"="+f(n))}return t.join("&")}let b=class{execute(e,t,n){const o=n.create(e.channel,e.channelName);let s=o.request.url=u.U.string("url",e.url,u.U.never);o.request.headers=e.headers||{},o.timeout=u.U.number("timeout",e.timeout,6e4),o.corsWithCredentials=u.U.boolean("corsWithCredentials",e.corsWithCredentials,!1),null!=(n=e.query)&&(s=s.split("#")[0],c=p(n),s=0<=s.indexOf("?")?s+"&"+c:s+"?"+c,o.request.url=s);var c=e.method;o.request.method="string"==typeof c?c:"GET",(c=e.blob)instanceof ArrayBuffer&&(o.request.content=c),"string"==typeof(c=e.text)&&(o.request.content=c),void 0!==(c=e.json)&&(o.request.json=c),null!=(c=e.form)&&(Object.values(c).some((e=>e instanceof Blob))?o.request.content=(0,i.x)(c):o.request.content=p(c)),"blob"===e.expect&&(o.binary=!0),t.cancellationToken.finally((function(){o.cancel()}));const a=(new Date).valueOf();return o.send().then((function(t){return l().attempt((function(){const n={channel:o,elapsed:(new Date).valueOf()-a};var s=o.response.content;if("string"==typeof s&&(n.text=s,"json"===e.expect&&(t||function(e){const t=e.response.headers["Content-Type"];return"string"==typeof t&&"application/json"===t.split(";")[0].trim()}(o))&&(n.json=JSON.parse(s))),s instanceof ArrayBuffer&&(n.blob=s),null!=(s=o.response.payload)&&(n.json=s),t)return n;const u=new r.ls("WF0014","Cannot perform web request.");return u.timedOut=n.elapsed>=o.timeout,u.elapsed=n.elapsed,u.error=o.response.error,u.partialResult=n,l().reject(u)}))}))}};b.action="gcx:wf:core:request:WebRequest",b.suite="gcx:wf:builtin",b=(0,o.gn)([(0,s.QZ)(a.m)],b)}}]);