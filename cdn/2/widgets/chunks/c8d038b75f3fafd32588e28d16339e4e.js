"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[5847],{45847:(e,o,t)=>{t.r(o),t.d(o,{GetCurrentPosition:()=>r});var c=t(8294),i=t(56655),a=t(18886);class r{constructor(){this.geolocation=navigator.geolocation}execute(e){return new Promise(((o,t)=>{if(!this.geolocation)return t(new i.ls("WF0016","Geolocation is not supported."));t={enableHighAccuracy:a.U.boolean("enableHighAccuracy",e.enableHighAccuracy,void 0),maximumAge:a.U.number("maximumAge",e.maximumAge,void 0),timeout:a.U.number("timeout",e.timeout,2e4)};const r=e=>o({position:new c.default({x:e.coords.longitude,y:e.coords.latitude,spatialReference:{wkid:4326}}),accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed,timestamp:e.timestamp}),s=e=>o({errorCode:e.code,errorMessage:e.message});if(e.useMultipleReadings){let o,c,i;const u=a.U.number("accuracyThreshold",e.accuracyThreshold,10);let n=!1;const d=()=>{n||(n=!0,this.geolocation.clearWatch(o),clearTimeout(c),i?r(i):s({code:3,message:"A geolocated position could not be obtained before the timeout."}))};c=setTimeout((()=>{d()}),t.timeout),o=this.geolocation.watchPosition((e=>{(!i||e.coords.accuracy<=i.coords.accuracy)&&(i=e),i.coords.accuracy<=u&&d()}),s,t)}else this.geolocation.getCurrentPosition(r,s,t)}))}}r.action="gcx:wf:arcgis::GetCurrentPosition",r.suite="gcx:wf:builtin"}}]);